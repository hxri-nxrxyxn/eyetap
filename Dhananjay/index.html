<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard-Controlled Menu System</title>
    <link rel="stylesheet" href="main.css">
</head>
<body class="page">

    <div id="main-menu-ui" class="main-menu">
        <div id="main-menu-container" class="main-menu__container">
            <div id="stationary-circle" class="main-menu__selector-circle"></div>
            <div id="stationary-options-container" class="main-menu__options-container">
                <div class="main-menu__option"><a href="food.html">Food</a></div>
                <div class="main-menu__option"><a href="greet.html">Greet</a></div>
                <div class="main-menu__option">X</div>
                <div class="main-menu__option"><a href="help.html">Help</a></div>
                <div class="main-menu__option"><a href="binge.html">Binge</a></div>
            </div>
        </div>
    </div>

    <script>
        // --- STATE & CONFIG ---
        let selectedIndex = 0;

        // The main menu items array is still needed for navigation logic
        const mainMenuItems = [
            { text: 'Food', href: 'food.html' },
            { text: 'Greet', href: 'greet.html' },
            { text: 'X', href: null },
            { text: 'Help', href: 'help.html' },
            { text: 'Binge', href: 'binge.html' }
        ];

        // --- DOM ELEMENT REFERENCES ---
        const mainMenuUI = document.getElementById('main-menu-ui');
        const menuItemElements = document.querySelectorAll('.main-menu__option');
        const stationaryCircle = document.getElementById('stationary-circle');
        const optionsContainer = document.getElementById('stationary-options-container');

        // --- CORE FUNCTIONS ---
        function updateMainMenuSelector() {
            if (menuItemElements.length === 0 || !stationaryCircle) return;

            const itemWidth = menuItemElements[0].offsetWidth;
            const middleIndex = Math.floor(mainMenuItems.length / 2);
            const offset = (middleIndex - selectedIndex) * itemWidth;
            
            optionsContainer.style.transform = `translateX(${offset}px)`;
            
            menuItemElements.forEach((el, index) => {
                el.classList.toggle('main-menu__option--is-active', index === selectedIndex);
            });
        }

        // --- KEYBOARD EVENT LISTENER ---
        document.addEventListener('keydown', (e) => {
            // Added 'ArrowDown' to prevent default page scroll
            if (['ArrowLeft', 'ArrowRight', 'Enter', 'ArrowDown'].includes(e.key)) {
                e.preventDefault();
            }
            
            switch (e.key) {
                case 'ArrowRight':
                    selectedIndex = (selectedIndex + 1) % mainMenuItems.length;
                    updateMainMenuSelector();
                    break;
                case 'ArrowLeft':
                    selectedIndex = (selectedIndex - 1 + mainMenuItems.length) % mainMenuItems.length;
                    updateMainMenuSelector();
                    break;
                case 'ArrowDown': // --- NEW --- This case handles the navigation
                    const selectedElement = menuItemElements[selectedIndex];
                    const link = selectedElement.querySelector('a'); // Find the <a> tag inside the selected div
                    if (link) { // Check if a link exists before trying to navigate
                        window.location.href = link.href;
                    }
                    break;
                case 'Enter':
                    // This case is now empty, so pressing Enter does nothing.
                    break;
            }
        });

        // --- INITIALIZATION ---
        window.onload = () => {
            selectedIndex = Math.floor(mainMenuItems.length / 2);
            mainMenuUI.style.display = 'flex';
            updateMainMenuSelector();
        };

        window.addEventListener('resize', updateMainMenuSelector);

    </script>
</body>
</html>