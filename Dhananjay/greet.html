<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard-Controlled Menu System</title>
    <link rel="stylesheet" href="main.css">
    <style>
        .greeting-message {
            display: none; /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 5rem;
            font-weight: bold;
            text-transform: uppercase;
            background-color: #000; /* Match the body background */
            z-index: 1000; /* Ensure it appears on top of other elements */
        }
    </style>
</head>
<body class="page">

    <div id="greeting-display" class="greeting-message"></div>

    <div id="main-menu-ui" class="main-menu">
        <div id="main-menu-container" class="main-menu__container">
            <div id="stationary-circle" class="main-menu__selector-circle"></div>
            <div id="stationary-options-container" class="main-menu__options-container">
                <div class="main-menu__option" data-greeting="Hi">Hi</div>
                <div class="main-menu__option" data-greeting="Good morning">Good morning</div>
                <div class="main-menu__option"><a href="index.html">X</a></div>
                <div class="main-menu__option" data-greeting="Hello">Hello</div>
                <div class="main-menu__option" data-greeting="Bye">Bye</div>
            </div>
        </div>
    </div>

    <script>
        // --- STATE & CONFIG ---
        let selectedIndex = 0;

        const mainMenuItems = [
            { text: 'Hi' },
            { text: 'Good Morning' },
            { text: 'X' },
            { text: 'Hello' },
            { text: 'Bye' }
        ];

        // --- DOM ELEMENT REFERENCES ---
        const mainMenuUI = document.getElementById('main-menu-ui');
        const menuItemElements = document.querySelectorAll('.main-menu__option');
        const stationaryCircle = document.getElementById('stationary-circle');
        const optionsContainer = document.getElementById('stationary-options-container');
        // ### NEW JS REFERENCE ###
        const greetingDisplay = document.getElementById('greeting-display');

        // --- CORE FUNCTIONS ---
        function updateMainMenuSelector() {
            if (menuItemElements.length === 0 || !stationaryCircle) return;

            const itemWidth = menuItemElements[0].offsetWidth;
            const middleIndex = Math.floor(mainMenuItems.length / 2);
            const offset = (middleIndex - selectedIndex) * itemWidth;
            
            optionsContainer.style.transform = `translateX(${offset}px)`;
            
            menuItemElements.forEach((el, index) => {
                el.classList.toggle('main-menu__option--is-active', index === selectedIndex);
            });
        }

        // --- KEYBOARD EVENT LISTENER ---
        document.addEventListener('keydown', (e) => {
            if (['ArrowLeft', 'ArrowRight', 'Enter', 'ArrowDown'].includes(e.key)) {
                e.preventDefault();
            }
            
            switch (e.key) {
                case 'ArrowRight':
                    selectedIndex = (selectedIndex + 1) % mainMenuItems.length;
                    updateMainMenuSelector();
                    break;
                case 'ArrowLeft':
                    selectedIndex = (selectedIndex - 1 + mainMenuItems.length) % mainMenuItems.length;
                    updateMainMenuSelector();
                    break;
                // --- MODIFIED CODE BLOCK ---
                case 'ArrowDown':
                    const selectedElement = menuItemElements[selectedIndex];
                    const greetingText = selectedElement.dataset.greeting; // Check for the data-greeting attribute

                    if (greetingText) {
                        // If the selected item is a greeting, show the message for 3 seconds
                        mainMenuUI.style.display = 'none'; // Hide the menu
                        greetingDisplay.innerText = greetingText; // Set the message text
                        greetingDisplay.style.display = 'flex'; // Show the message container

                        // Wait 3 seconds (3000 milliseconds) then redirect
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 3000);

                    } else {
                        // If it's not a greeting, it must be the 'X' button. Redirect immediately.
                        const link = selectedElement.querySelector('a');
                        if (link) {
                            window.location.href = link.href;
                        }
                    }
                    break;
                // --- END MODIFIED CODE BLOCK ---
                case 'Enter':
                    // This case is now empty, so pressing Enter does nothing.
                    break;
            }
        });

        // --- INITIALIZATION ---
        window.onload = () => {
            selectedIndex = Math.floor(mainMenuItems.length / 2);
            mainMenuUI.style.display = 'flex';
            updateMainMenuSelector();
        };

        window.addEventListener('resize', updateMainMenuSelector);
    </script>
</body>
</html>